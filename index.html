<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Electron GRPC test</title>
    <style>
      #problem { color: red }
    </style>
  </head>
  <body>
    <h1>Setup</h1>
    <p>Remember to connect to an RNode, and deploy the contract before using this dapp.</p>


    <h1>Your User Controls</h1>
    <p>Each user chooses a name. This name is the public channel on which you will send commands to update and check your status. Using a public name is a <strong>huge security hole</strong>, but alas, RNode does not have a working name registry yet. In the future, we will use unforgeable names.</p>
    <input id="name" type="text" />
    <button id="register">Register</button>

    <input id="new-status" type="text" />
    <button id="set-status">Post</button>

    <p>TODO The dapp should only enable one of register or post new depending on whether the name is registered. For now, we trust the user to use them correctly.</p>

    <h1>Check Friend's Status</h1>
    <p>What friend do you want to check on?</p>
    <input id="friend-name" type="text" />
    <button id="check-status">Check</button>
    <p>Your friend's status is: <span id="friend-status"></p>

    <p id="problem"></p>

<script type="module">
import statusPage from './page.js';
window.addEventListener("DOMContentLoaded", () => {
  const byId = id => document.getElementById(id);
  const ui = {
    nameBox: byId("name"),
    registerButton: byId("register"),
    newStatusBox: byId("new-status"),
    setStatusButton: byId("set-status"),
    friendBox: byId("friend-name"),
    checkButton: byId("check-status"),
    friendStatusP: byId("friend-status"),
    proposeButton: byId("propose"),
    problem: byId("problem"),
  };
  statusPage(ui, fetch);
});
</script>
  </body>
</html>
